---
description: Proprietary code modification guidelines for KVOIP Woulz
globs:
  [
    '**/*.ts',
    '**/*.tsx',
    '**/*.js',
    '**/*.jsx',
    '**/*.py',
    '**/*.java',
    '**/*.go',
    '**/*.rs',
    '**/*.php',
    '**/*.rb',
    '**/*.cs',
    '**/*.cpp',
    '**/*.c',
    '**/*.h',
    '**/*.hpp',
    '**/*.swift',
    '**/*.kt',
    '**/*.scala',
    '**/*.clj',
    '**/*.hs',
    '**/*.ml',
    '**/*.fs',
    '**/*.vb',
    '**/*.sql',
    '**/*.sh',
    '**/*.bash',
    '**/*.zsh',
    '**/*.fish',
    '**/*.ps1',
    '**/*.bat',
    '**/*.cmd',
  ]
alwaysApply: true
---

# Proprietary Code Modifications

## Overview

When modifying existing code in this repository, all changes must be clearly marked as proprietary modifications for KVOIP Woulz.

## Rule Requirements

### Modified Code Comments

Any modified or added code within existing files must be surrounded by specific proprietary comments. Only substantive changes need to be marked - formatting changes like indentation, blank lines, or whitespace adjustments should be ignored.

```typescript
/* @kvoip-woulz proprietary:begin */

// Your modified or added code goes here
const newFunction = () => {
  // Implementation
};

/* @kvoip-woulz proprietary:end */
```

### Implementation Guidelines

1. **Surround all modifications**: Every piece of modified or added code must be wrapped or appended with/by the proprietary comment blocks
2. **Place comments correctly**:
   if wrapping...
   - Start comment should be placed immediately before the modified code
   - End comment should be placed immediately after the modified code
3. **Maintain readability**: Keep the proprietary comments close to the actual code changes. If a change is only one line, just append the comment to the end of it.
4. **Multiple sections**: If you have multiple modified sections in the same file, each section should have its own comment pair
5. **No redundancy**: If a section is already wrapped in proprietary comment blocks, don't add more comments inside it. If a file already has a proprietary header in its first line, don't wrap any code blocks inside it.

### Examples

#### Function Modification

```typescript
// Original function
const calculateTotal = (price: number) => {
  return price * 1.1;
};

// Modified function with proprietary comments
const calculateTotal = (price: number) => {
  /* @kvoip-woulz proprietary:begin */
  const taxRate = 0.15;
  return price * (1 + taxRate);
  /* @kvoip-woulz proprietary:end */
};
```

#### Class Method Addition

```typescript
class UserService {
  // Existing methods...

  /* @kvoip-woulz proprietary:begin */
  async validateKVOIPUser(userId: string): Promise<boolean> {
    return this.checkUserPermissions(userId);
  }
  /* @kvoip-woulz proprietary:end */
}
```

#### Import Statement Addition

```typescript
import { Component } from 'react';
import { KVOIPUtils } from '@/utils/kvoip-utils'; /* @kvoip-woulz proprietary */
```

### Best Practices

1. **Granular marking**: Mark each logical unit of modification separately
2. **Clear boundaries**: Ensure the comment boundaries clearly encompass only the modified code
3. **Consistent formatting**: Use the exact comment format specified
4. **Documentation**: Consider adding inline comments within the proprietary sections to explain the modifications

### Enforcement

- All code reviews should verify that modifications are properly marked
- Automated tools should check for proper comment formatting
- Missing proprietary comments should be flagged during the review process

### Exceptions

- **Formatting changes**: Indentation, blank lines, whitespace adjustments, and code formatting do not require proprietary comments
- **Configuration files**: (package.json, tsconfig.json, etc.) may not require proprietary comments for minor changes
- **Documentation files**: (.md, .txt) may use different marking conventions
- **Build and deployment scripts**: Should follow the same rules as code files
